// export PVK="xxxx" && export ACCOUNT_ID="xxxx" && npm run test -- ./test/transfer
import { GXClient } from "../lib";

const private_key = process.env.PVK;
const account = process.env.ACCOUNT;
let client;
const wasm = `0061736d0100000001290860027f7f006000006000017f60027f7f017f60037f7f7f017f60017f0060037e7e7e0060017f017f027a0703656e760561626f7274000103656e7610616374696f6e5f646174615f73697a65000203656e760f6772617068656e655f617373657274000003656e76066d656d637079000403656e76067072696e7473000503656e76087072696e74735f6c000003656e7610726561645f616374696f6e5f646174610003031615030303060003030300070307050705050005030401040501700102020503010001077608066d656d6f72790200165f5a6571524b3131636865636b73756d32353653315f0007165f5a6571524b3131636865636b73756d31363053315f0008165f5a6e65524b3131636865636b73756d31363053315f0009056170706c79000a066d616c6c6f63001004667265650013066d656d636d70001a0908010041000b021b0b0aa31d150b00200020014120101a450b0b00200020014120101a450b0d00200020014120101a4100470b6301017f4100410028020441206b2203360204024020012000520d002003200137031820024280808080808080c0eb00520d00200341003602142003410136021020032003290310370208200341186a200341086a100c1a0b4100200341206a3602040be50101037f413010042001280208200141016a220420012d0000220241017122031b2001280204200241017620031b100541c0001004413010042001280208200420012d0000220241017122031b2001280204200241017620031b100541c0001004413010042001280208200420012d0000220241017122031b2001280204200241017620031b100541c0001004413010042001280208200420012d0000220241017122031b2001280204200241017620031b100541c0001004413010042001280208200420012d0000220241017122031b2001280204200241017620031b100541c00010040bb40201057f410028020441306b2206210541002006360204200128020421022001280200210441002101024010012203450d00024002402003418104490d002003101021010c010b410020062003410f6a4170716b22013602040b2001200310061a0b200541003602082005420037030020052001360224200520013602202005200120036a360228200541206a2005100d1a02402003418104490d00200110130b200020024101756a2101200541106a200510191a02402002410171450d00200128020020046a28020021040b200541206a200541106a10191a2001200541206a2004110000024020052d0020410171450d00200528022810150b024020052d0010410171450d00200528021810150b024020052d0000410171450d00200541086a28020010150b4100200541306a36020441010bb40301067f4100410028020441206b220736020420074100360218200742003703102000200741106a100e1a0240024002400240024002400240024002402007280214220520072802102204470d0020012d00004101710d01200141003b0100200141086a21040c020b200741086a410036020020074200370300200520046b220241704f0d072002410b4f0d02200720024101743a00002007410172210620020d030c040b200128020841003a000020014100360204200141086a21040b2001410010172004410036020020014200370200200728021022040d030c040b200241106a4170712205101421062007200541017236020020072006360208200720023602040b20022103200621050340200520042d00003a0000200541016a2105200441016a21042003417f6a22030d000b200620026a21060b200641003a00000240024020012d00004101710d00200141003b01000c010b200128020841003a0000200141003602040b200141001017200141086a200741086a2802003602002001200729030037020020072802102204450d010b20072004360214200410150b4100200741206a36020420000f0b20071016000b810203047f017e017f200028020421054100210742002106200041086a2102200041046a21030340200520022802004941101002200328020022052d000021042003200541016a2205360200200441ff0071200741ff0171220774ad2006842106200741076a210720044107760d000b024002402006a7220320012802042207200128020022046b22024d0d002001200320026b100f200041046a2802002105200141046a2802002107200128020021040c010b200320024f0d00200141046a200420036a22073602000b200041086a28020020056b200720046b22054f412010022004200041046a2207280200200510031a2007200728020020056a36020020000bad0201057f0240024002400240024020002802082202200028020422066b20014f0d002006200028020022056b220320016a2204417f4c0d0241ffffffff0721060240200220056b220241feffffff034b0d0020042002410174220620062004491b2206450d020b2006101421020c030b200041046a21000340200641003a00002000200028020041016a22063602002001417f6a22010d000c040b0b41002106410021020c010b20001018000b200220066a2104200220036a220521060340200641003a0000200641016a21062001417f6a22010d000b2005200041046a2203280200200028020022016b22026b2105024020024101480d0020052001200210031a200028020021010b2000200536020020032006360200200041086a20043602002001450d00200110150f0b0b090041c400200010110bb904010c7f02402001450d00024020002802c041220d0d004110210d200041c0c1006a41103602000b200141086a200141046a41077122026b200120021b210202400240024020002802c441220a200d4f0d002000200a410c6c6a4180c0006a21010240200a0d0020004184c0006a220d2802000d0020014180c000360200200d20003602000b200241046a210a034002402001280208220d200a6a20012802004b0d002001280204200d6a220d200d28020041808080807871200272360200200141086a22012001280200200a6a360200200d200d28020041808080807872360200200d41046a22010d030b2000101222010d000b0b41fcffffff0720026b2104200041c8c1006a210b200041c0c1006a210c20002802c8412203210d03402000200d410c6c6a22014180c0006a210620014184c0006a280200220541046a210d0340200520062802006a2107200d417c6a2208280200220941ffffffff07712101024020094100480d000240200120024f0d000340200d20016a220a20074f0d01200a280200220a4100480d012001200a41ffffffff07716a41046a22012002490d000b0b20082001200220012002491b200941808080807871723602000240200120024d0d00200d20026a200420016a41ffffffff07713602000b200120024f0d040b200d20016a41046a220d2007490d000b41002101200b4100200b28020041016a220d200d200c280200461b220d360200200d2003470d000b0b20010f0b2008200828020041808080807872360200200d0f0b41000b870501087f20002802c44121010240024041002d009042450d0041002802944221070c010b3f002107410041013a009042410020074110742207360294420b200721030240024002400240200741ffff036a41107622023f0022084d0d00200220086b40001a4100210820023f00470d0141002802944221030b41002108410020033602944220074100480d0020002001410c6c6a210220074180800441808008200741ffff037122084181f8034922061b6a2008200741ffff077120061b6b20076b2107024041002d0090420d003f002103410041013a009042410020034110742203360294420b20024180c0006a210220074100480d01200321060240200741076a417871220520036a41ffff036a41107622083f0022044d0d00200820046b40001a20083f00470d0241002802944221060b4100200620056a360294422003417f460d0120002001410c6c6a22014184c0006a2802002206200228020022086a2003460d020240200820014188c0006a22052802002201460d00200620016a2206200628020041808080807871417c20016b20086a72360200200520022802003602002006200628020041ffffffff07713602000b200041c4c1006a2202200228020041016a220236020020002002410c6c6a22004184c0006a200336020020004180c0006a220820073602000b20080f0b02402002280200220820002001410c6c6a22034188c0006a22012802002207460d0020034184c0006a28020020076a2203200328020041808080807871417c20076b20086a72360200200120022802003602002003200328020041ffffffff07713602000b2000200041c4c1006a220728020041016a22033602c0412007200336020041000f0b2002200820076a36020020020b7b01037f024002402000450d0041002802844222024101480d0041c4c00021032002410c6c41c4c0006a21010340200341046a2802002202450d010240200241046a20004b0d00200220032802006a20004b0d030b2003410c6a22032001490d000b0b0f0b2000417c6a2203200328020041ffffffff07713602000b3f01027f02402000410120001b2201101022020d00034041002102410028029842220041003a00002000450d012000110100200110102202450d000b0b20020b0e0002402000450d00200010130b0b05001000000be20201067f0240200141704f0d00410a2102024020002d00002205410171450d0020002802002205417e71417f6a21020b0240024020054101710d00200541fe017141017621030c010b200028020421030b410a2104024020032001200320014b1b2201410b490d00200141106a417071417f6a21040b024020042002460d00024002402004410a470d0041012106200041016a210120002802082102410021070c010b200441016a101421010240200420024b0d002001450d020b024020002d000022054101710d0041012107200041016a2102410021060c010b2000280208210241012106410121070b0240024020054101710d00200541fe017141017621050c010b200028020421050b0240200541016a2205450d0020012002200510031a0b02402006450d00200210150b02402007450d0020002003360204200020013602082000200441016a4101723602000f0b200020034101743a00000b0f0b1000000b05001000000bba0101037f20004200370200200041086a22034100360200024020012d00004101710d00200020012902003702002003200141086a28020036020020000f0b02402001280204220341704f0d00200128020821020240024002402003410b4f0d00200020034101743a0000200041016a210120030d010c020b200341106a4170712204101421012000200441017236020020002001360208200020033602040b20012002200310031a0b200120036a41003a000020000f0b1000000b4901037f4100210502402002450d000240034020002d0000220320012d00002204470d01200141016a2101200041016a21002002417f6a22020d000c020b0b200320046b21050b20050b0300000b0b2f050041040b04206100000041100b04676574000041200b0572656164000041300b0568692c20000041c0000b020a00`

const abi = {
    "____comment": "This file was generated by gxc-abigen. DO NOT EDIT - 2019-01-08T03:40:23",
    "version": "gxc::abi/1.0",
    "types": [],
    "structs": [{
        "name": "hi",
        "base": "",
        "fields": [{
            "name": "user",
            "type": "string"
        }
        ]
    }
    ],
    "actions": [{
        "name": "hi",
        "type": "hi",
        "payable": false
    }
    ],
    "tables": [],
    "error_messages": [],
    "abi_extensions": []
}

if (!private_key || !account) {
    throw new Error("需要设置环境变量ACCOUNT和PVK");
}

describe("updateContract", () => {
    before(function () {
        client = new GXClient(private_key, account, "wss://testnet.gxchain.org");
    });

    it("updateContract", () => {
        return new Promise((resolve, reject) => {
            client.updateContract("heyue123", "", wasm, abi, true).then(resp => {
                resolve();
                console.lot(resp)
            }).catch(ex => {
                reject(ex);
            });
        });
    });
});
